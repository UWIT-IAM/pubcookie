<html>

<head>
<title>Pubcookie configuration file</title>
<link rel="stylesheet" href="pubcookie.css" type="text/css">
</head>

<body>

<h1>Pubcookie config file variables</h1>

<p>
The following tables provide an authoritative list of run-time configuration
variables for the login server, keyserver, and keyclient [fixme: really??].
Some of these variables are shared by all of the components; while many of 
them pertain only to the login server.
</p>

<p>See <a href="config.sample">config.sample</a> and <a 
href="config.login.sample">config.login.sample</a> for example
configuration for an application server and login server, respectively.</p>

<table border width="95%">

<tr>
 <th>Name</th> 
 <th><a href="#types">Type</a></th> 
 <th>Description</th>
</tr>

<tr>
 <td>logging_level</td>
 <td>int</td>
 <td>Defines how much information is logged; increase with your level of
    frustration. Levels: 0-5</td>
</tr>

<tr>
<td>login_uri</td><td>string</td><td>The complete URI of the login cgi</td>
</tr>

<tr>
<td>logout_prog</td><td>string</td><td>The name under which the logout program was invoked, includes the path.  
</td>
</tr>

<tr>
<td>login_servers</td><td>   list</td><td>
    List of all of the login servers for our domain;
                        keyserver uses this to distribute keys to the other
                        login servers</td>
</tr>

<tr>
<td>ssl_ca_file</td><td> string</td><td> Path and filename of the
                        Cerificate Authority which signed our SSL
                        key</td> </tr>

<tr>
<td>ssl_ca_path</td><td> string</td><td> Path of directory containing
                        CA certificates named by their hashes for all
                        CAs that we should trust</td> </tr>

<tr>
<td>ssl_cert_file</td><td> string</td><td> Path and filename of our
SSL certificate</td> </tr>

<tr>
<td>ssl_key_file</td><td> string</td><td> Path and filename of our SSL
key</td> </tr> 

<tr> <td>granting_key_file</td><td>string</td><td>Path and filename of
the secret portion of the granting keypair (only found on login
servers)</td> </tr>

<tr>
<td>granting_cert_file</td><td> string</td><td> Path and filename of
the public portion of the granting keypair (found on all servers)</td>
</tr>

<tr>
<td>enterprise_domain</td><td> string</td><td> The DNS domain under
                            which all hosts will live.  must be at
                            least a second level domain
                            (e.g. <tt>example.edu</tt>); used to scope
                            cookies for communication between the
                            login server and app servers</td> </tr>

<tr>
<td>keymgt_uri</td><td> string</td><td> the location of the
"keyserver" CGI.</td> </tr>

<tr>
<td>keydir</td><td> string</td><td> location of DES keys used for
                        encrypting cookies sent to the app server</td>
                        </tr>

<tr>
<td>umask</td><td> string</td><td> umask used when creating files</td>
</tr>

<tr>
 <td>general_facility</td>
 <td>string</td>
 <td>The log facility to log general log messages</td>
</tr>

<tr>
 <td>audit_facility</td>
 <td>string</td>
 <td>The log facility to log audit log messages</td>
</tr>

<tr>
 <td>debug</td>
 <td>int</td>
 <td>Deprecated. Use <tt>logging_level</tt> instead. Non-zero value enables debug 
    logging. The higher the number, the more debugging output that is generated.</td>
</tr>

<tr>
<th colspan="3">login cgi specific options</th>
</tr>

<tr>
 <td>basic_verifier</td>
 <td> string</td>
 <td> The verifier to use for the "basic" flavor</td>
</tr>

<tr>
 <td>default_l_expire</td>
 <td>time</td>
 <td>Defines the default duration of a single sign-on session (login cookie expiry). Default: 8 hours.</td>
</tr>

<tr>	 
<td>login_host</td><td>string</td><td>The hostname of login server</td>	 
</tr>

<tr>
<td>app_logout_string-<i>servername</i>-<i>appid</i></td><td>string</td><td> A custom
logout response msg for <i>appid</i> on <i>servername</i></td> </tr>

<tr>
<td>append_realm</td><td> switch</td><td> If true, the authentication
                        realm is appended to the user name after
                        authentication but before issuing cookies (eg,
                        the cookie will contain user@REALM)</td> </tr>

<tr>
<td>default_realm</td><td>   string</td><td>  optional default
                        authentication realm to pass to the 
                        verifier when none is submitted via the form</td>
</tr>

<tr>
<td>mirrorfile</td><td> string</td><td> full path to a file to keep a
                        mirrored copy of all output sent to the client
                        by the most recent call to the login cgi</td>
                        </tr>

<tr>
 <td>kiosk</td>
 <td>special</td>
 <td>Kiosk policy configuration for reduced SSO duration; matches by
    user-agent string, remote IP addresses, or IP address ranges.
    Syntax: <tt>kiosk: time agent|ip [agent|ip] ... [ time agent|ip ... ]</tt>
</td>
</tr>

<tr>
<td>min_countdown</td>
<td>time</td>
<td>The minimum countdown for automatically reloading the status page.</td>
</tr>

<tr>
<td>egd_socket</td><td>       socket-location </td>
<td>Location of EGD socket (e.g. /dev/egd-pool) if your system lacks entropy.</td>
</tr>

<!-- lets put deprecated variables down here for now -->

<tr>
 <td>kiosk_keys</td><td>      list</td>
 <td>Deprecated. Use <tt>kiosk</tt> instead. User-Agent strings that identify Kiosk Machines</td>
</tr>

<tr>
 <td>kiosk_values</td><td>    list</td>
 <td>Deprecated. Use <tt>kiosk</tt> instead. Duration of login cookie for kiosk machines (same order as
  <tt>kiosk_keys</tt>)
 </td>
</tr>

<tr>
<th colspan="3">Template File Options</th>
</tr>

<tr>
 <td>template_root</td>
 <td>string</td>
 <td>The root directory for the templates.  Default:
  <tt>{PUBCOOKIE_DIR}/login_templates</tt>.
 </td>
</tr>

<tr>
 <td>tmpl_login</td>
 <td>string</td>
 <td>The template for the login page.  Default: login</td>
</tr>

<tr>
 <td>tmpl_login_user_form_field</td>
 <td>string</td>
 <td>The template for the user input field. Default: login_user_form_field</td>
</tr>

<tr>
 <td>tmpl_login_user_static</td>
 <td>string</td>
 <td>The template for a static user field for reauthentication. Default: login_user_static</td>
</tr>

<tr>
 <td>tmpl_login_bad_auth</td>
 <td>string</td>
 <td>File containing HTML snippet to display on the login page when 
  authentication fails. Default: login_bad_auth.
 </td>
</tr>

<tr>
 <td>tmpl_login_reauth</td>
 <td>string</td>
 <td>File containing HTML snippet to display on the login page when the 
  application requests reauthentication.  Default: login_reauth.</td>
</tr>
 
<tr>
 <td>tmpl_login_cache_creds_wrong</td>
 <td>string</td>
 <td>File containing HTML snippet to display on the login page when the 
  application requests credentials that are different from those in use 
  already by the weblogin service.  Default: login_reauth.</td>
</tr>

<tr>
 <td>tmpl_error</td>
 <td>string</td>
 <td>Template displayed when there is an internal error.  Default: 
  error</td>
</tr>

<tr>
 <td>tmpl_logout_app</td>
 <td>string</td>
 <td>Default: logout_app.</td>
</tr>

<tr>
 <td>tmpl_logout_app_custom_prefix</td>
 <td>string</td>
 <td>Default: logout_app_custom_prefix</td>
</tr>

<tr>
 <td>tmpl_logout_app_custom_suffix</td>
 <td>string</td>
 <td>Default: logout_app_custom_suffix</td>
</tr>

<tr>
 <td>tmpl_logout_part1</td>
 <td>string</td>
 <td>Default: logout_part1</td>
</tr>

<tr>
 <td>tmpl_logout_part2</td>
 <td>string</td>
 <td>Default: logout_part2</td>
</tr>

<tr>
 <td>tmpl_logout_already_weblogin</td>
 <td>string</td>
 <td>Default: logout_already_weblogin</td>
</tr>

<tr>
 <td>tmpl_logout_postscript_still_others</td>
 <td>string</td>
 <td>Default: logout_postscript_still_others</td>
</tr>

<tr>
 <td>tmpl_logout_still_weblogin</td>
 <td>string</td>
 <td>Default: logout_still_weblogin</td>
</tr>

<tr>
 <td>tmpl_logout_time_remaining</td>
 <td>string</td>
 <td>Default: logout_time_remaining</td>
</tr>

<tr>
 <td>tmpl_logout_postscript_still_weblogin</td>
 <td>string</td>
 <td>Default: logout_postscript_still_weblogin</td>
</tr>

<tr>
 <td>tmpl_status</td>
 <td>string</td>
 <td>The template for the status page displayed when the user goes to the 
  weblogin server directly.  Default: status</td>
</tr>

<tr>
 <td>tmpl_nonpost_redirect</td>
 <td>string</td>
 <td>Template for the redirect back to the app after login.</td>
</tr>

<tr>
 <td>tmpl_notok_part1</td>
 <td>string</td>
 <td>Default: notok_part1</td>
</tr>

<tr>
 <td>tmpl_notok_part2</td>
 <td>string</td>
 <td>Default: notok_part2</td>
</tr>

<tr>
 <td>tmpl_pinit_responce1</td>
 <td>string</td>
 <td>Default: pinit_responce1</td>
</tr>

<tr>
 <td>tmpl_pinit_responce2</td>
 <td>string</td>
 <td>Default: pinit_responce2</td>
</tr>

<tr>
 <td>tmpl_welcome_back</td>
 <td>string</td>
 <td>Default: welcome_back</td>
</tr>

<tr>
<th colspan="3"><tt>kerberos_v5</tt> verifier options</th>
</tr>

<tr>
 <td>kerberos5_keytab</td>
 <td>string</td>
 <td>Full path to the K5 keytab file that contains the service key. 
  Default is "/etc/krb5.keytab".</td>
</tr>

<tr>
 <td>kerberos5_service_name</td>
 <td>string</td>
 <td>Service name or "primary" used in the principal for
  the service key. Default is "host".</td>
</tr>

<tr>
<th colspan="3"><tt>ldap</tt> verifier options</th>
</tr>

<tr>
    <td>ldap_uri</td><td>        list</td>
    <td>    The LDAP URI in this format:
        <pre>            
            ldaps://host/o=searchbase???(uid=%s)?x-BindDN=Bind%20DN,x-Password=Password
            ldap://host/o=searchbase???(uid=%s)?x-BindDN=Bind%20DN,x-Password=Password
        </pre>
        <ul>
            <li>(uid=%s) is the search filter for finding an account by netid.  The
            %s will be replaced with the netid.  The host string can optionally
            contain a port number.  The filter can only contain one %s at this time.
            </li>

            <li>x-BindDN and x-Password are the Bind DN and Password, URL
            encoded.
            <b>(Commas must be encoded as %2c and spaces as %20.)</b>
            The x-BindDN and x-Password may be omitted entirely if the
            connection is anonymous.
            </li>
        </ul>
    </td>
</tr>

<tr>
 <td>cert_db_path</td><td>string</td>
 <td>Path to where Netscape's cert7.db and key3.db can be found.
  Default: <tt>{PUBCOOKIE_DIR}/keys</tt></td>
</tr>

<tr>
<th colspan="3">Unsupported/experimental options</th>
</tr>

<tr>
<td>save_credentials </td> <td>switch</td> <td>Controls whether
                flavor_basic saves a copy of the user's master
                credentials for later use by flavor_getcred</td> </tr>

<tr>
<td>getcred_authz_file</td> <td>string</td><td> flavor_getcred uses
                this file to determine who is authorized to request
                what credentials</td> </tr>

</table>

<h4><a name="types">Types of Values</a></h4>

<p>Some of the config variables share the same types of values.</p>

<dl compact="compact">
<dt> int </dt>
<dd> an integer value </dd>
<dt> string </dt>
<dd> a string value </dd>
<dt> list </dt>
<dd> a list of values </dd>
<dt> time </dt>
<dd> an integer value representing time; use 
     a suffix of 'm' to mean minutes or 'h' to mean hours, 
     e.g. 5m means 300 and 1h means 3600.
</dd>
</dl>

</body>

</html>
