# This is NOT generated by automake!

AUTORECONF=autoreconf

prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
sbindir=@sbindir@
libexecdir=@libexecdir@
datadir=@datadir@
datarootdir=@datarootdir@
mandir=@mandir@
mansubdir=@mansubdir@
sysconfdir=@sysconfdir@
piddir=@piddir@
srcdir=@srcdir@
top_srcdir=@top_srcdir@

DESTDIR=
VPATH=@srcdir@

PATHS=	-DDUODIR=\"$(sysconfdir)\"

CC=@CC@
LD=@LD@
CFLAGS=@CFLAGS@
CPPFLAGS=-I. -I$(srcdir) @CPPFLAGS@ @OPENSSL_INCLUDES@ $(PATHS) @DEFS@
LDFLAGS=-L. @OPENSSL_LDFLAGS@ @LDFLAGS@
LIBS=@OPENSSL_LIBS@ @LIBS@

AR=@AR@
RANLIB=@RANLIB@
INSTALL=@INSTALL@

LIBDUO_OBJS=	duo.o http_parser.o https.o match.o parson.o urlenc.o duo_iframe.o

TARGETS=	libduo.a test-duoapi test-duologin

all: $(TARGETS)

$(LIBDUO_OBJS): Makefile.in config.h

.c.o:
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

libduo.a: $(LIBDUO_OBJS)
	$(AR) rv $@ $(LIBDUO_OBJS)
	$(RANLIB) $@

test-duoapi: test-duoapi.o libduo.a
	$(LD) -o $@ test-duoapi.o $(LDFLAGS) -lduo $(LIBS)

test-duologin: test-duologin.o libduo.a
	$(LD) -o $@ test-duologin.o $(LDFLAGS) -lduo $(LIBS)

clean:
	rm -f *.o *.a $(TARGETS) config.cache config.log
	rm -f *.out core

distclean:
	rm -f *.o *.a $(TARGETS) logintest config.cache config.log
	rm -f *.out core *~
	rm -f Makefile config.h config.status
	rm -rf autom4te.cache
