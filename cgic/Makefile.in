#    $Id: Makefile.in,v 1.1 2002-08-15 23:47:15 jjminer Exp $

#You may wish to add -DNO_UNISTD and -DNO_SYSTEM to CFLAGS if
#your system lacks the /usr/include/unistd.h header file
#or the system() function, respectively. Non-unix systems
#will also definitely have different linker syntax.

# potential flags CGICDEBUG
CFLAGS=@CFLAGS@
CC=@CC@
AR=@AR@
LIBS=-L./ -lcgic
FORCE_RM=@RM@ -f

all: libcgic.a cgictest capture

libcgic.a: cgic.o cgic.h
	rm -f libcgic.a
	$(AR) rc libcgic.a cgic.o

cgictest: cgictest.o libcgic.a 
	$(CC) cgictest.o -o cgictest ${LIBS}

tmp: tmp.c
	cc -o tmp -I. tmp.c $(LIBS)

capture: capture.o libcgic.a
	$(CC) capture.o -o capture ${LIBS}

clean:
	$(FORCE_RM) *.o *.a cgictest capture

distclean:
	$(FORCE_RM) Makefile

capture.o: capture.c Makefile
cgic.o: cgic.c Makefile
cgictest.o: cgictest.c Makefile

DISTDIR=cgic1.07-pubcookie1.01
TARFILE=cgic1.07-pubcookie1.01.tar

tar:
	rm -f ${DISTDIR} ${TARFILE}.gz
	ln -s . ${DISTDIR}
	tar -cf ${TARFILE} \
		${DISTDIR}/CHANGES \
		${DISTDIR}/Makefile \
		${DISTDIR}/capture.c \
		${DISTDIR}/cgic.c \
		${DISTDIR}/cgic.c.orig \
		${DISTDIR}/cgic.h \
		${DISTDIR}/cgic.h.orig \
		${DISTDIR}/cgic.html \
		${DISTDIR}/cgic.txt \
		${DISTDIR}/cgictest.c \
		${DISTDIR}/license.txt \
		${DISTDIR}/readme.txt \
		${DISTDIR}/support.txt \
		${DISTDIR}/testform.html 
	gzip ${TARFILE}
	rm -f ${DISTDIR}
